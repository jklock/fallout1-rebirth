# RME Reset (2026-02-11)

## Goal
- Reapply the RME data patch from a clean baseline, normalize paths/casing for macOS/iOS, and capture a reproducible inventory before scripting the flow.

## Actions performed
- Seeded patched workspace: copied [GOG/unpatchedfiles](../../GOG/unpatchedfiles) to [GOG/patchedfiles](../../GOG/patchedfiles).
- Applied RME deltas: patched `master.dat` and `critter.dat` using [third_party/rme/master.xdelta](../../third_party/rme/master.xdelta) and [third_party/rme/critter.xdelta](../../third_party/rme/critter.xdelta).
- Overlaid loose RME content: `rsync -a GOG/rme/DATA/ -> GOG/patchedfiles/data/`.
- Normalized hard-coded loads: moved badword and globals files to [GOG/patchedfiles/data/data](../../GOG/patchedfiles/data/data) as `badwords.txt` and `vault13.gam` to match engine lookups.
- Lower-cased patched data tree: rebuilt [GOG/patchedfiles/data](../../GOG/patchedfiles/data) entirely in lower-case (maps, proto, scripts, text, art, sound). Removed the temporary `data_casebackup` after rebuild.
- Fixed leftover temp name: restored [GOG/patchedfiles/data/text/english/game/map.msg](../../GOG/patchedfiles/data/text/english/game/map.msg).

## Current state
- Patched data: all lower-case paths, ready for bundle/IPA packaging.
- Diffs vs baseline (latest refresh):
  - Files differ: `master.dat`, `critter.dat`.
  - Added files: 1,235 (RME payload + lower-case replacements).
  - Removed files: 135 (upper-case originals displaced by lower-case copies).
  - Only-in entries: 50 (RME additions + casing normalization).
  - Case-collision report: 135 (expected from intentional lower-casing).

## Diff artifacts (tmp/)
- [tmp/rme-unpatched-files-20260211.txt](../../tmp/rme-unpatched-files-20260211.txt)
- [tmp/rme-patched-files-20260211.txt](../../tmp/rme-patched-files-20260211.txt)
- [tmp/rme-files-added-20260211.txt](../../tmp/rme-files-added-20260211.txt)
- [tmp/rme-files-removed-20260211.txt](../../tmp/rme-files-removed-20260211.txt)
- [tmp/rme-diff-brief-20260211.txt](../../tmp/rme-diff-brief-20260211.txt)
- [tmp/rme-diff-onlyin-20260211.txt](../../tmp/rme-diff-onlyin-20260211.txt)
- [tmp/rme-diff-files-differ-20260211.txt](../../tmp/rme-diff-files-differ-20260211.txt)
- [tmp/rme-case-collisions-20260211.txt](../../tmp/rme-case-collisions-20260211.txt)

## Outcomes
- Clean, lower-case patched payload aligned with engine hard-coded lookups (`data\\badwords.txt`, `data\\vault13.gam`).
- Inventory captured for future automation/testing scripts.
- Ready to port the manual steps into patch scripts once validation passes.

## Next focus
- Add targeted runtime logging for map/script/proto/text/art/sound loads while testing the patched set.
- Fold the lower-casing + relocation steps into `scripts/patch/` so user-facing patching mirrors this flow.

# Subagent: Art — FRM / LST verification & visual anomaly triage (automated + manual review artifacts)

Purpose
- Verify that RME art assets are present in the patched data, cross-referenced correctly by LST files, and surface visual anomalies from automated runs for triage.

Non-interactive commands (exact)
- Count critical FRM files (examples):
  - ls GOG/patchedfiles/data/art/critters/ | wc -l
  - ls GOG/patchedfiles/data/art/critters/ | grep -Ei "nachld|hanpwr|malieu|mamtnt" -n || true
- CRITTERS.LST integrity check (case-insensitive):
  - CRITTERS_LST=$(find GOG/patchedfiles/data/art/critters/ -iname "critters.lst" -print -quit)
  - wc -l "$CRITTERS_LST"
- Report FRMs not referenced by LST (non-interactive):
  - (see snippet in TASK file — uses awk/comm; helper scripts exist in scripts/patch/)
- Produce art evidence by running the runtime sweep (non-interactive):
  - export F1R_PATCHLOG=1
  - python3 scripts/patch/rme-runtime-sweep.py --exe "build-macos/RelWithDebInfo/Fallout 1 Rebirth.app/Contents/MacOS/fallout1-rebirth" --out-dir development/RME/ARTIFACTS/evidence/runtime --timeout 120

Where outputs land (evidence)
- development/RME/ARTIFACTS/evidence/gate-2/art/
- development/RME/ARTIFACTS/evidence/runtime/screenshots/ and `present-anomalies/`
- CSV/MD reports generated by runtime sweep

Acceptance criteria
- CRITTERS.LST contains entries for `NACHLD`, `HANPWR`, `MALIEU` and the counts match the expected FRM files.
- No critical missing FRM files reported by grep/comm check.
- Any present-anomaly BMPs are recorded under `development/RME/ARTIFACTS/evidence/runtime/present-anomalies/` for human review.

Subagent prompt (use this EXACT prompt when launching a subagent to run art tasks)

"Run automated art validation for RME. Steps:
1) Verify presence/counts of critical FRM groups: `nachld`, `hanpwr`, `malieu`, `mamtnt`. Save results to `development/RME/ARTIFACTS/evidence/gate-2/art/A-1-critter-counts.txt`.
2) Locate `CRITTERS.LST`, count lines and extract lines referencing the `nachld`, `hanpwr`, `malieu` prefixes; save to `development/RME/ARTIFACTS/evidence/gate-2/art/A-2-critter-lst-snippet.txt`.
3) Run the runtime sweep (with F1R_PATCHLOG=1) to generate screenshots and patchlogs for visual anomalies.
4) Run `scripts/dev/patchlog_analyze.py` on any generated patchlogs and collect `present-anomaly` BMPs into `development/RME/ARTIFACTS/evidence/runtime/present-anomalies/`.

Return a JSON object: `frm_counts` (map of prefix→count), `lst_counts` (total lines), `missing_frms` (list), `anomaly_screenshots` (paths), `artifacts` (paths to generated files). If any FRM expected by LST is missing, mark `pass=false` and include the exact LST line and missing filename."